#ifndef INC_GY_906_H_
#define INC_GY_906_H_

// PRIVATE INCLUDE ================================================================================

#include "i2c.h"

// PRIVATE VARIABLES ==============================================================================


// FUNCTIONS ======================================================================================

float GY906_BCC_ReadObjectTemperature(void)
{
  uint8_t data[3];  // Array to store temperature data

  // Send command to request object temperature
  data[0] = 0x07;  // Register address of object temperature high byte
  if (HAL_I2C_Master_Transmit(&hi2c, GY906_BCC_ADDR, data, 1, HAL_MAX_DELAY) != HAL_OK)
  {
    // Handle error
  }

  // Receive object temperature data
  if (HAL_I2C_Master_Receive(&hi2c, GY906_BCC_ADDR, data, 3, HAL_MAX_DELAY) != HAL_OK)
  {
    // Handle error
  }

  // Convert temperature data to floating-point value
  int16_t tempRaw = (data[1] << 8) | data[0];
  float tempObject = tempRaw * 0.02 - 273.15;  // Assuming Celsius temperature scale

  return tempObject;
}

#endif /* INC_GY_906_H_ */
